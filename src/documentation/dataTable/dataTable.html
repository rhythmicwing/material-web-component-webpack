<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
        <%= htmlWebpackPlugin.options.title %>
    </title>

    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">


    <!-- Bootstrap-table + Materialize plugin JS -->
    <script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script src="https://unpkg.com/bootstrap-table@1.21.0/dist/bootstrap-table.min.js"></script>
    <script
        src="https://unpkg.com/bootstrap-table@1.21.1/dist/themes/materialize/bootstrap-table-materialize.min.js"></script>
    <script src="https://unpkg.com/bootstrap-table@1.21.0/dist/bootstrap-table-locale-all.min.js"></script>

    <script src="https://unpkg.com/tableexport.jquery.plugin/tableExport.min.js"></script>
    <script
        src="https://unpkg.com/bootstrap-table@1.21.0/dist/extensions/export/bootstrap-table-export.min.js"></script>
</head>

<body>

    <navigation></navigation>
    <topappbar></topappbar>

    <main class="mdc-top-app-bar--fixed-adjust">
        <section class="main-content">
            <div class="content-section mdc-elevation--z3">
                <h2 class="mdc-typography--headline6">Data Table</h2>

                <div class="demo-table">

                    <div class="mdc-select mdc-select--filled tablelocaleselect">
                        <input type="hidden" name="demo-input" id="localetest">
                        <div class="mdc-select__anchor" role="button" aria-haspopup="listbox" aria-expanded="false"
                            aria-labelledby="demo-label demo-selected-text">
                            <span class="mdc-select__ripple"></span>
                            <span id="demo-label" class="mdc-floating-label">Locale Change</span>
                            <span class="mdc-select__selected-text-container">
                                <span id="demo-selected-text" class="mdc-select__selected-text"></span>
                            </span>
                            <span class="mdc-select__dropdown-icon">
                                <svg class="mdc-select__dropdown-icon-graphic" viewBox="7 10 10 5" focusable="false">
                                    <polygon class="mdc-select__dropdown-icon-inactive" stroke="none"
                                        fill-rule="evenodd" points="7 10 12 15 17 10">
                                    </polygon>
                                    <polygon class="mdc-select__dropdown-icon-active" stroke="none" fill-rule="evenodd"
                                        points="7 15 12 10 17 15">
                                    </polygon>
                                </svg>
                            </span>
                            <span class="mdc-line-ripple"></span>
                        </div>

                        <!-- Other elements from the select remain. -->
                        <div class="mdc-select__menu mdc-menu mdc-menu-surface mdc-menu-surface--fullwidth">
                            <ul class="mdc-list">
                                <li class="mdc-list-item" data-value="">
                                    <span class="mdc-list-item__ripple"></span>
                                </li>
                                <li class="mdc-list-item" data-value="af-ZA">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">af-ZA</span>
                                </li>
                                <li class="mdc-list-item" data-value="ar-SA">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">ar-SA</span>
                                </li>
                                <li class="mdc-list-item" data-value="ca-ES">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">ca-ES</span>
                                </li>
                                <li class="mdc-list-item" data-value="cs-CZ">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">cs-CZ</span>
                                </li>
                                <li class="mdc-list-item" data-value="da-DK">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">da-DK</span>
                                </li>
                                <li class="mdc-list-item" data-value="de-DE">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">de-DE</span>
                                </li>
                                <li class="mdc-list-item" data-value="el-GR">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">el-GR</span>
                                </li>
                                <li class="mdc-list-item mdc-list-item--selected" data-value="en-US"
                                    aria-selected="true">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">en-US</span>
                                </li>
                                <li class="mdc-list-item" data-value="es-AR">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">es-AR</span>
                                </li>
                                <li class="mdc-list-item" data-value="es-CL">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">es-CL</span>
                                </li>
                                <li class="mdc-list-item" data-value="es-CR">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">es-CR</span>
                                </li>
                                <li class="mdc-list-item" data-value="es-ES">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">es-ES</span>
                                </li>
                                <li class="mdc-list-item" data-value="es-MX">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">es-MX</span>
                                </li>
                                <li class="mdc-list-item" data-value="es-NI">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">es-NI</span>
                                </li>
                                <li class="mdc-list-item" data-value="es-SP">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">es-SP</span>
                                </li>
                                <li class="mdc-list-item" data-value="et-EE">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">et-EE</span>
                                </li>
                                <li class="mdc-list-item" data-value="eu-EU">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">eu-EU</span>
                                </li>
                                <li class="mdc-list-item" data-value="fa-IR">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">fa-IR</span>
                                </li>
                                <li class="mdc-list-item" data-value="fi-FI">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">fi-FI</span>
                                </li>
                                <li class="mdc-list-item" data-value="fr-BE">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">fr-BE</span>
                                </li>
                                <li class="mdc-list-item" data-value="fr-FR">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">fr-FR</span>
                                </li>
                                <li class="mdc-list-item" data-value="he-IL">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">he-IL</span>
                                </li>
                                <li class="mdc-list-item" data-value="hr-HR">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">hr-HR</span>
                                </li>
                                <li class="mdc-list-item" data-value="hu-HU">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">hu-HU</span>
                                </li>
                                <li class="mdc-list-item" data-value="id-ID">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">id-ID</span>
                                </li>
                                <li class="mdc-list-item" data-value="it-IT">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">it-IT</span>
                                </li>
                                <li class="mdc-list-item" data-value="ja-JP">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">ja-JP</span>
                                </li>
                                <li class="mdc-list-item" data-value="ka-GE">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">ka-GE</span>
                                </li>
                                <li class="mdc-list-item" data-value="ko-KR">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">ko-KR</span>
                                </li>
                                <li class="mdc-list-item" data-value="ms-MY">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">ms-MY</span>
                                </li>
                                <li class="mdc-list-item" data-value="nb-NO">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">nb-NO</span>
                                </li>
                                <li class="mdc-list-item" data-value="nl-NL">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">nl-NL</span>
                                </li>
                                <li class="mdc-list-item" data-value="pl-PL">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">pl-PL</span>
                                </li>
                                <li class="mdc-list-item" data-value="pt-BR">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">pt-BR</span>
                                </li>
                                <li class="mdc-list-item" data-value="pt-PT">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">pt-PT</span>
                                </li>
                                <li class="mdc-list-item" data-value="ro-RO">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">ro-RO</span>
                                </li>
                                <li class="mdc-list-item" data-value="ru-RU">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">ru-RU</span>
                                </li>
                                <li class="mdc-list-item" data-value="sk-SK">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">sk-SK</span>
                                </li>
                                <li class="mdc-list-item" data-value="sv-SE">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">sv-SE</span>
                                </li>
                                <li class="mdc-list-item" data-value="th-TH">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">th-TH</span>
                                </li>
                                <li class="mdc-list-item" data-value="tr-TR">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">tr-TR</span>
                                </li>
                                <li class="mdc-list-item" data-value="uk-UA">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">uk-UA</span>
                                </li>
                                <li class="mdc-list-item" data-value="ur-PK">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">ur-PK</span>
                                </li>
                                <li class="mdc-list-item" data-value="uz-Latn-UZ">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">uz-Latn-UZ</span>
                                </li>
                                <li class="mdc-list-item" data-value="vi-VN">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">vi-VN</span>
                                </li>
                                <li class="mdc-list-item" data-value="zh-CN">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">zh-CN</span>
                                </li>
                                <li class="mdc-list-item" data-value="zh-TW">
                                    <span class="mdc-list-item__ripple"></span>
                                    <span class="mdc-list-item__text">zh-TW</span>
                                </li>
                            </ul>
                        </div>
                    </div>



                    <!-- <div class="select">
                        <select class="form-control" id="locale">
                            <option value="sv-SE">sv-SE</option>
                        </select>
                    </div> -->

                    <div id="toolbar">
                        <button id="remove" class="btn btn-danger" disabled>
                            <i class="material-icons">delete</i> <span>Delete</span>
                        </button>
                    </div>

                    <table id="table" data-toolbar="#toolbar" data-search="true" data-show-refresh="true"
                        data-show-toggle="true" data-show-fullscreen="true" data-show-columns="true"
                        data-show-columns-toggle-all="true" data-detail-view="true" data-show-export="true"
                        data-click-to-select="true" data-detail-formatter="detailFormatter"
                        data-minimum-count-columns="2" data-show-pagination-switch="true" data-pagination="true"
                        data-id-field="id" data-page-list="[10, 25, 50, 100, all]" data-show-footer="true"
                        data-side-pagination="server"
                        data-url="https://examples.wenzhixin.net.cn/examples/bootstrap_table/data"
                        data-response-handler="responseHandler">
                    </table>
                </div>
            </div>
        </section>
    </main>

    <script>
        var $table = $('#table')
        var $remove = $('#remove')
        var selections = []

        function getIdSelections() {
            return $.map($table.bootstrapTable('getSelections'), function (row) {
                return row.id
            })
        }

        function responseHandler(res) {
            $.each(res.rows, function (i, row) {
                row.state = $.inArray(row.id, selections) !== -1
            })
            return res
        }

        function detailFormatter(index, row) {
            var html = []
            $.each(row, function (key, value) {
                html.push('<p><b>' + key + ':</b> ' + value + '</p>')
            })
            return html.join('')
        }

        function operateFormatter(value, row, index) {
            return [
                '<a class="like" href="javascript:void(0)" title="Like">',
                '<i class="material-icons">favorite</i>',
                '</a>  ',
                '<a class="remove" href="javascript:void(0)" title="Remove">',
                '<i class="material-icons">delete</i>',
                '</a>'
            ].join('')
        }

        window.operateEvents = {
            'click .like': function (e, value, row, index) {
                alert('You click like action, row: ' + JSON.stringify(row))
            },
            'click .remove': function (e, value, row, index) {
                $table.bootstrapTable('remove', {
                    field: 'id',
                    values: [row.id]
                })
            }
        }

        function totalTextFormatter(data) {
            return 'Total'
        }

        function totalNameFormatter(data) {
            return data.length
        }

        function totalPriceFormatter(data) {
            var field = this.field
            return '$' + data.map(function (row) {
                return +row[field].substring(1)
            }).reduce(function (sum, i) {
                return sum + i
            }, 0)
        }

        function initTable() {
            $table.bootstrapTable('destroy').bootstrapTable({
                height: 750,
                locale: $('#localetest').val(),
                columns: [
                    [{
                        field: 'state',
                        checkbox: true,
                        rowspan: 2,
                        align: 'center',
                        valign: 'middle'
                    }, {
                        title: 'Item ID',
                        field: 'id',
                        rowspan: 2,
                        align: 'center',
                        valign: 'middle',
                        sortable: true,
                        footerFormatter: totalTextFormatter
                    }, {
                        title: 'Item Detail',
                        colspan: 3,
                        align: 'center'
                    }],
                    [{
                        field: 'name',
                        title: 'Item Name',
                        sortable: true,
                        footerFormatter: totalNameFormatter,
                        align: 'center'
                    }, {
                        field: 'price',
                        title: 'Item Price',
                        sortable: true,
                        align: 'center',
                        footerFormatter: totalPriceFormatter
                    }, {
                        field: 'operate',
                        title: 'Item Operate',
                        class: 'operate',
                        align: 'center',
                        clickToSelect: false,
                        events: window.operateEvents,
                        formatter: operateFormatter
                    }]
                ]
            })
            $table.on('check.bs.table uncheck.bs.table ' +
                'check-all.bs.table uncheck-all.bs.table',
                function () {
                    $remove.prop('disabled', !$table.bootstrapTable('getSelections').length)

                    // save your data, here just save the current page
                    selections = getIdSelections()
                    // push or splice the selections if you want to save all data selections
                })
            $table.on('all.bs.table', function (e, name, args) {
                console.log(name, args)
            })
            $remove.click(function () {
                var ids = getIdSelections()
                $table.bootstrapTable('remove', {
                    field: 'id',
                    values: ids
                })
                $remove.prop('disabled', true)
            })
        }

        $(function () {
            initTable();

            //$('#locale').change(initTable);

            $('.mdc-select .mdc-list li').click(function () {
                var asdasd = $(this).find(".mdc-list-item__text").html();
                setTimeout(function () {
                    initTable();
                }, 100);
                //alert(asdasd);
            });

        })
    </script>
</body>

</html>